
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>תורת הגילוי &#8212; Linear Algebra to iPhone 1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/main_style.css?v=28a1b870" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'noise/detection';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="מבוא ל-DFT" href="../DSP/DFT_intro.html" />
    <link rel="prev" title="סינון רעש" href="noise_filters.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro/intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Linear Algebra to iPhone 1 - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Linear Algebra to iPhone 1 - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro/intro.html">
                    מאלגברה לינארית לאייפון
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">מערכות לינאריות</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../LTI/intro_to_LTI.html">מבוא למערכות לינאריות</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LTI/impulse_response.html">תגובת להלם</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LTI/frequency_response.html">תגובת בתדר</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LTI/wave_in_a_room.html">החזרות בחדר</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LTI/noise_removal_examples.html">דוגמה לתגובה בתדר בתור מסנן רעשים</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">מעגלי RLC</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../RLC/RC_intro.html">מעגלי RC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RLC/RLC_intro.html">מעגלי RLC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RLC/power_on_load.html">הספק על רכיבים</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">שידור אנלוגי</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../analog_communication/analog_intro.html">מבוא לתקשורת אנלוגית</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analog_communication/AM.html">אפנון AM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analog_communication/PM_FM.html">אפנון PM ואפנון FM</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">שידור דיגיטלי</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../digital_communication/digital_intro.html">מבוא לתקשורת דיגיטלית</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital_communication/linear_modulations.html">אפנונים לינארים</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital_communication/more_modulations.html">בעיות שלא הכרתם - עוד אפנונים</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital_communication/FSK.html">אפנון תדר - FSK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digital_communication/orthogonality.html">אורתוגונליות</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">דיגיטציה</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../digitation_and_reconstruction/digitation_intro.html">מה זה לדיגיטציה</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitation_and_reconstruction/sampling.html">דגימה</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitation_and_reconstruction/interpolation.html">שחזור באינטרפולציה</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitation_and_reconstruction/quantization.html">קוונטיזציה</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digitation_and_reconstruction/quantization_example.html">קוונטיזציה לדוגמא</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">רעש</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="noise_intro.html">מה זה רעש</a></li>
<li class="toctree-l1"><a class="reference internal" href="random_signals.html">אותות אקראיים</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise_spectrum.html">ספקטרום רעש</a></li>
<li class="toctree-l1"><a class="reference internal" href="physical_noises.html">רעשים במערכות פיזיקליות</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise_filters.html">סינון רעשים</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">תורת הגילוי</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DSP/DFT_intro.html">מבוא ל-DFT</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">תורת האינפורמציה</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../information/entropy.html">למה אנטרופיה?</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/yoav-palti/linear-algebra-to-iphone" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/noise/detection.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>תורת הגילוי</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">(על קצה המזלג)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roc-curve">ROC Curve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#match-filter">גילוי אופטימלי - match filter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">דוגמא - גילוי של מכ”ם</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1>תורת הגילוי<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<section id="id2">
<h2>(על קצה המזלג)<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>בהרבה מערכות המטרה היא לקבל החלטה מתוך מדידות. “כן” או “לא”.</p>
<p>דוגמאות:</p>
<ul class="simple">
<li><p>מכ”ם - האם יש מטרה או לא</p></li>
<li><p>סונאר - אותו הדבר אבל עם אות אקוסטי</p></li>
<li><p>מערכת גילוי אש</p></li>
<li><p>מערכת אבטחה - נגיעה בגדר לדוגמא</p></li>
<li><p>תקשורת דיגיטלית - להחליט איזה סימבול נשלח</p></li>
<li><p>התרעה מפני רעידות אדמה</p></li>
</ul>
<p>ניקח לדוגמא מערכת של תקשורת דיגיטלית שמשדרת באפנון BASK. המטרה היא להחליט עבור כל זמן סמל האם הוא “0” או “1”. כמובן שאם יש רק אות נקי אין שום בעיה ליצור אלגוריתם שמפריד בין שני הסימבולים האפשריים אבל מה קורה כשיש רעש?</p>
<p>כשאין רעש הסיגנל המתקבל נראה ככה:
<img alt="ASK_no_noise" src="../_images/ASK_no_noise.png" /></p>
<p>אבל עם רעש הסיגנל נראה יותר ככה:
<img alt="ASK_noise" src="../_images/ASK_noise.png" /></p>
<p>אחרי מעבר במקלט קוהרנטי (מסונכרן פאזה) נקבל סיגנל שנראה פחות אות יותר ככה:
<img alt="ASK_detect" src="../_images/ASK_detect.png" /></p>
<p>ועכשיו מגיע החלק המעניין. אנחנו צריכים להחליט האם קיבלנו 0 או 1 בכל זמן סימבול. תמיד נעשה את זה על ידי החלטה על סף כלשהו</p>
<p>צורה יותר נוחה להסתכל על הבעיה הזו היא לשאול מה הוא הערך של הגרף בהינתן שאנחנו יודעים מה הסימבול. בגלל הרעש אין תשובה אחת אלא התפלגות. לדוגמא במקרה שלנו</p>
<p><img alt="ASK_detect_hist" src="../_images/ASK_detect_hist.png" /></p>
<p>כאשר באדום אתם רואים את התפלגות הערכים של הסיגנל כאשר הסימבול הוא 1 ובכחול כאשר הסימבול הוא 0. האם אנחנו רוצים להעביר את הסף ב-0.5? זה תלוי מה אנחנו רוצים לעשות.</p>
<p>אבל באופן כללי כאן פעם ראשונה אנחנו נתקלים בפורמליזם שלנו בו יש התפלגות שונה לסיגנל בהינתן מה שאנחנו רוצים לגלות. נסמן את שתי ההתפלגויות:</p>
<ul class="simple">
<li><p>ההתפלגות בהינתן “1” (יש סיגנל) - <span class="math notranslate nohighlight">\(\mathbb{P}\left(V_{ask}|&quot;1&quot;\right)\)</span></p></li>
<li><p>ההתפלגות בהינתן “0” (אין סיגנל) - <span class="math notranslate nohighlight">\(\mathbb{P}\left(V_{ask}|&quot;0&quot;\right)\)</span></p></li>
</ul>
<p>במקרה שלנו נראה שאפשר להפריד ממש בקלות. מה קורה אם הרעש ממש גדל?
<img alt="ASK_detect_hist_noise" src="../_images/ASK_detect_hist_noise.png" /></p>
<p>עכשיו הרבה יותר קשה להחליט האם הסימבול הוא “0” או “1”.</p>
<p>נוכל עכשיו להגדיר שני מדדים מאוד חשובים
נחשוב על הזמנים בהם משודר “1” בתור הזמנים בהם יש אירוע מסויים שאנחנו רוצים לגלות. לדוגמא שריפה או נגיעה בגדר וכו.</p>
<ul class="simple">
<li><p>ההסתברות לגילוי - <span class="math notranslate nohighlight">\(P_{d}=\intop_{V_{th}}^{\infty}\mathbb{P}\left(V|&quot;1&quot;\right)dV\)</span></p></li>
<li><p>ההסתברות להתרעות שוא - <span class="math notranslate nohighlight">\(P_{FA}=\intop_{V_{th}}^{\infty}\mathbb{P}\left(V|&quot;0&quot;\right)dV\)</span></p></li>
</ul>
<p>נשים לב שאם הסף שלנו <span class="math notranslate nohighlight">\(V_{th}\)</span> יהיה <span class="math notranslate nohighlight">\(\infty\)</span> נקבל 0 FA אבל גם בלי גילויים בכלל בעוד שאם הסף יהיה <span class="math notranslate nohighlight">\(-\infty\)</span> נקבל בדיוק הפוך. תמיד נגלה אבל גם תמיד יהיו התרעות שוא.</p>
<blockquote>
<div><p>אנחנו רוצים לשאוף למצב בו <span class="math notranslate nohighlight">\(P_{d}=1\)</span> וגם <span class="math notranslate nohighlight">\(P_{FA}=0\)</span> אבל נשים לב שאם יש חפיפה בין פונקציות צפיפות ההסתברות לא נוכל לעשות את זה לא משנה מה הוא הסף <span class="math notranslate nohighlight">\(V_{th}\)</span> שנבחר</p>
</div></blockquote>
</section>
<section id="roc-curve">
<h2>ROC Curve<a class="headerlink" href="#roc-curve" title="Link to this heading">#</a></h2>
<p>בגלל שאנחנו רוצים לבחון את הביצועים של מערכת הגילוי שלנו אנחנו רוצים למדוד אותה לא כתלות בסף אותו בחרנו. מה שלרוב עושים הוא בודקים את ביצועי המערכת בכל הספים האפשריים.</p>
<p>עבור כל סף נקבל שני מספרים <span class="math notranslate nohighlight">\(P_{d}\)</span> ו-<span class="math notranslate nohighlight">\(P_{FA}\)</span>. הגרף אשר מציג את כל הנקודות האלו נקרא גרף ROC והוא נראה ככה:</p>
<p>בבירור הגרף צריך להיות מעל הישר בו <span class="math notranslate nohighlight">\(P_{d}=P_{FA}\)</span> משום שאחרת אפשר להחליף את הזמנים שבהם מתריעים עם הזמנים שלא מתריעים ולשפר את הביצועים.</p>
<p>אם יש שתי מערכות התרעה (כמו בתמונה) בהן אחת תמיד נמצאת מעל השנייה נוכל לומר שאחת טובה יותר תמיד מהשנייה. אבל זה לא תמיד המצב ולכן נחפש מדד של מספר שאומר לנו כמה מערכת גילוי היא “טוב”. מדד מקובל נקרא AUC (Area Under Curve)</p>
<p>וכשמו כן הוא:</p>
<blockquote>
<div><p>AUC הוא השטח מתחת לגרף ה-ROC</p>
</div></blockquote>
<div class="dropdown admonition">
<p class="admonition-title">דוגמה לחישוב FAR</p>
<p>הרבה פעמים במערכות מספר חשוב הוא כמות התרעות השוא. המספר שאנחנו נתנו <span class="math notranslate nohighlight">\(P_{FA}\)</span> הוא רק הסיכוי במדידה כלשהי לקבל FA. כדי לקבל את ה-FAR (False Alarm Rate) צריך להכפיל בקצב המדידות שלנו.
ובאופן כללי אם אנחנו מודדים בקצב <span class="math notranslate nohighlight">\(f\)</span>:</p>
<div class="math notranslate nohighlight">
\[FAR=P_{FA}\cdot f\]</div>
<p>לרוב יהיה מספר איתו המערכת יודעת להתמודד. נגיד התרעת שוא אחת ביום, הוא אחת בחודש או אחת בשנה וכו. תלוי המקרה.</p>
<p>מהחסם הזה ניתן לחסום את <span class="math notranslate nohighlight">\(P_{FA}\)</span> וככה גם לבחור <span class="math notranslate nohighlight">\(V_{th}\)</span> מתאים.</p>
</div>
</section>
<section id="match-filter">
<h2>גילוי אופטימלי - match filter<a class="headerlink" href="#match-filter" title="Link to this heading">#</a></h2>
<p>אחת הבעיות הנפוצות בעיבוד אותות הוא זיהוי של אות ידוע מראש אך בזמן לא ידוע. ננסה לפתור את הבעיה <strong>עבור רעש לבן</strong> (אני אומר כאן בסוגריים שהרבה פעמים עושים תהליך שנקרא הלבנה של הרעש. כלומר מעבירים בפילטר שגורם ל-PSD להיות קבוע ורק אז משתמשים ב-match filter)</p>
<p>נתחיל עם הנחה מקלה שאנחנו רוצים להבחין בין שני מצבים.</p>
<ol class="arabic simple">
<li><p>קלטנו רק רעש - <span class="math notranslate nohighlight">\(\mathcal{H}_{0}:r\left(t\right)=\xi\left(t\right)\)</span></p></li>
<li><p>קלטנו אות ורעש - <span class="math notranslate nohighlight">\(\mathcal{H}_{1}:r\left(t\right)=s\left(t\right)+\xi\left(t\right)\)</span></p></li>
</ol>
<p>מה נעשה כדי להבדיל בין השניים?</p>
<p>מה יקרה אם נסתכל על הפעולה:</p>
<div class="math notranslate nohighlight">
\[r_{match}=\intop_{-\infty}^{\infty}r\left(t\right)\cdot s^{\ast}\left(t\right)dt\]</div>
<p>נשים לב כי:</p>
<div class="math notranslate nohighlight">
\[\begin{split}r_{match}=\intop_{-\infty}^{\infty}r\left(t\right)\cdot s^{\ast}\left(t\right)dt=\mathbb{E}\left[r\left(t\right)\cdot s^{\ast}\left(t\right)\right]=\begin{cases}
E_{s}+\mathbb{E}\left[r\left(t\right)\cdot\xi^{\ast}\left(t\right)\right] &amp; \mathcal{H}_{1}\\
\mathbb{E}\left[r\left(t\right)\cdot\xi^{\ast}\left(t\right)\right] &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<p>כמובן שאין לנו אף פעם אות אינסופי אבל בעיקרון <span class="math notranslate nohighlight">\(\mathbb{E}\left[r\left(t\right)\cdot n^{\ast}\left(t\right)\right]\)</span> הוא 0 אם זמן האינטגרציה הוא אינסופי.</p>
<p>נשים לב שמה שכתבנו היא פשוט מכפלה פנימית בין האות שלנו ובין האות <span class="math notranslate nohighlight">\(s^{\ast}\left(t\right)\)</span>.</p>
<p>ננתח איך זה נראה בדגימה אמיתית. נניח שיש לנו סיגנל <span class="math notranslate nohighlight">\(s\left[n\right]\)</span> באורך <span class="math notranslate nohighlight">\(N\)</span> ורעש לבן גאוסייני <span class="math notranslate nohighlight">\(\xi\left[n\right]\sim\mathcal{N}\left(0,\sigma^{2}\right)\)</span> כאשר הפעולה שאנחנו מחשבים היא:</p>
<div class="math notranslate nohighlight">
\[\begin{split}r_{match}=\sum_{n=0}^{N-1}r\left[n\right]\cdot s^{\ast}\left[n\right]=\begin{cases}
\sum_{n=0}^{N-1}\left|s\left[n\right]\right|^{2}+\sum_{n=0}^{N-1}\xi\left[n\right]\cdot s^{\ast}\left[n\right] &amp; \mathcal{H}_{1}\\
\sum_{n=0}^{N-1}\xi\left[n\right]\cdot s^{\ast}\left[n\right] &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<p>נסתכל על הביטוי <span class="math notranslate nohighlight">\(\sum_{n=0}^{N-1}\xi\left[n\right]\cdot s^{\ast}\left[n\right]\)</span> אפשר לחשוב עליו בתור ממוצע משוקלל של משתנים גאוסיינים בלתי תלויים.</p>
<p>הממוצע כמובן נשאר 0 משום ש:</p>
<div class="math notranslate nohighlight">
\[\mathbb{E}\left[\sum_{n=0}^{N-1}\xi\left[n\right]\cdot s^{\ast}\left[n\right]\right]=\sum_{n=0}^{N-1}\underset{0}{\underbrace{\mathbb{E}\left[\xi\left[n\right]\right]}}\cdot\mathbb{E}\left[s^{\ast}\left[n\right]\right]=0\]</div>
<p>ומה עם ה-<span class="math notranslate nohighlight">\(Var\)</span>?</p>
<div class="math notranslate nohighlight">
\[\mathbb{V}\left[\sum_{n=0}^{N-1}\xi\left[n\right]\cdot s^{\ast}\left[n\right]\right]=\sum_{n=0}^{N-1}\mathbb{\mathbb{V}}\left[\xi\left[n\right]\cdot s^{\ast}\left[n\right]\right]=\sum_{n=0}^{N-1}\left(s^{\ast}\left[n\right]\right)^{2}\underset{\sigma^{2}}{\underbrace{\mathbb{\mathbb{V}}\left[\xi\left[n\right]\right]}}\underset{s^{\ast}\left[n\right]\in\mathbb{R}}{\underbrace{=}}\sigma^{2}\sum_{n=0}^{N-1}\left(s\left[n\right]\right)^{2}\]</div>
<p>כלומר ה-<span class="math notranslate nohighlight">\(Var\)</span> מוכפל ב-<span class="math notranslate nohighlight">\(\sum_{n=0}^{N-1}\left(s\left[n\right]\right)^{2}\)</span> נשים לב שזו הייתה בדיוק ההגדרה שלנו לאנרגיה של האות</p>
<div class="math notranslate nohighlight">
\[E_{s}\equiv\sum_{n=0}^{N-1}\left(s\left[n\right]\right)^{2}\]</div>
<p>קיבלנו לבסוף כי:</p>
<div class="math notranslate nohighlight">
\[\begin{split}r_{match}=\begin{cases}
E_{s}+\xi_{N} &amp; \mathcal{H}_{1}\\
\xi_{N} &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<p>כאשר <span class="math notranslate nohighlight">\(\xi_{N}\sim\mathcal{N}\left(0,\sigma^{2}\cdot E_{s}\right)\)</span></p>
<p>או אם ננרמל את התוצאה באנרגיה של האות:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{r_{match}}{E_{s}}=\begin{cases}
1+\zeta &amp; \mathcal{H}_{1}\\
\zeta &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\zeta\sim\mathcal{N}\left(0,\frac{\sigma^{2}}{E_{s}}\right)\]</div>
<p>ככל שהאות שלנו יותר חזק נקבל שהרעש קטן. בפרט סטיית התקן קטנה ב-<span class="math notranslate nohighlight">\(\sqrt{E_{s}}\)</span></p>
<p>שימו לב שמכאן ממש נוח לחשב את <span class="math notranslate nohighlight">\(P_{d},P_{FA}\)</span> כתלות ב-SNR. עבור <span class="math notranslate nohighlight">\(V_{th}\)</span> שונים.</p>
<p>כאן אפשר להסביר מה זה אומר ש-match filter הוא אופטימלי. זה אומר שעבור <strong>כל</strong> <span class="math notranslate nohighlight">\(P_{FA}\)</span> כלשהו ב-SNR מסויים האלגוריתמיקה של match-filter נותן את ה-<span class="math notranslate nohighlight">\(P_{d}\)</span> הכי גבוה בין כל הדטקטורים האפשריים!</p>
<p>לקריאה נוספת אתם מוזמנים להתחיל מדף <a class="reference external" href="https://en.wikipedia.org/wiki/Uniformly_most_powerful_test">הויקיפדיה הזה</a></p>
<p>תנו לזה רגע לחלחל. <strong>כל דטקטור</strong> אחר יתן <span class="math notranslate nohighlight">\(P_{d}\)</span> נמוך יותר עבור אותו <span class="math notranslate nohighlight">\(P_{FA}\)</span> אי אפשר להיות טובים יותר!</p>
<p>אם רוצים לשפר את הביצועים יש לנו אפשרות אחת</p>
<ul class="simple">
<li><p><strong>לשפר את ה-SNR</strong></p></li>
</ul>
<p>מה אם לא יודעים את זמן הגעת האות? כלומר מה אם האות שמתקבל הוא:</p>
<p><span class="math notranslate nohighlight">\(\mathcal{H}_{1}:r\left(t\right)=s\left(t-t_{0}\right)+n\left(t\right)\)</span></p>
<p>אנחנו יכולים פשוט להריץ חיפוש. כלומר לנסות את כל הערכים האפשריים. איך עושים את זה?</p>
<div class="math notranslate nohighlight">
\[r_{match}\left(t\right)=\intop_{-\infty}^{\infty}r\left(\tau\right)\cdot s^{\ast}\left(\tau-t\right)d\tau=r\left(t\right)\ast s\left(-t\right)\]</div>
<p>כלומר פשוט מעבירים את הסיגנל דרך פילטר של <span class="math notranslate nohighlight">\(h\left(t\right)=s\left(-t\right)\)</span> ואז מחפשים את המקסימום באות.</p>
<p>מה האות שמתקבל?
אז האמת שאנחנו כבר יודעים את התשובה. ניתן לחזור על אות החישובים אבל הפעם עם אינטגרלים וסינון רעשים במקום חישובים של תוחלת ושונות.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{r_{match}\left(t\right)}{E_{s}}=\begin{cases}
\frac{s\left(t-t_{0}\right)\ast s\left(-t\right)}{E_{s}}+\frac{\xi\left(t\right)\ast s\left(-t\right)}{E_{s}} &amp; \mathcal{H}_{1}\\
\frac{\xi\left(t\right)\ast s\left(-t\right)}{E_{s}} &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<p>את הפעולה <span class="math notranslate nohighlight">\(s\left(t-t_{0}\right)\ast s\left(-t\right)\)</span> אנחנו כבר מכירים. זאת האוטוקורלציה של האות אבל מוזזת סביב <span class="math notranslate nohighlight">\(t_{0}\)</span>. והמקסימום שלה הוא האנרגיה של האות.</p>
<p>ומה עם <span class="math notranslate nohighlight">\(\xi\left(t\right)\ast s\left(-t\right)\)</span> זה רעש שעבר פילטר. נוכל לשאול איך השתנה ה-PSD שלו.
נגדיר <span class="math notranslate nohighlight">\(\zeta\left(t\right)=\frac{\xi\left(t\right)\ast s\left(-t\right)}{E_{s}}\)</span> ונקבל:</p>
<div class="math notranslate nohighlight">
\[\tilde{S}_{\zeta\zeta}\left(\omega\right)=\tilde{S}_{\xi\xi}\left(\omega\right)\left|\frac{S^{\ast}\left(\omega\right)}{E_{s}}\right|^{2}=\frac{1}{E_{s}^{2}}\tilde{S}_{\xi\xi}\left(\omega\right)\left|S\left(\omega\right)\right|^{2}\]</div>
<p>ואם אנחנו שואלים את עצמנו מה ההספק הממוצע שיש ברעש כדי לחשב SNR:</p>
<div class="math notranslate nohighlight">
\[\left\langle P_{\zeta}\right\rangle =R_{\zeta}\left(0\right)=\intop_{-\infty}^{\infty}\tilde{S}_{\zeta\zeta}\left(\omega\right)d\omega=\intop_{-\infty}^{\infty}\frac{1}{E_{s}^{2}}\sigma^{2}\left|S\left(\omega\right)\right|^{2}d\omega=\frac{1}{E_{s}^{2}}\sigma^{2}\underset{E_{s}}{\underbrace{\intop_{-\infty}^{\infty}\left|S\left(\omega\right)\right|^{2}d\omega}}=\frac{\sigma^{2}}{E_{s}}\]</div>
<p>זה אומר שההספק הממוצע קטן ב-<span class="math notranslate nohighlight">\(E_{s}\)</span> כמו במקרה הבדיד.</p>
<p>נסכם:</p>
<blockquote>
<div><p>אם יש לנו אות <span class="math notranslate nohighlight">\(r\left(t\right)=s\left(t-t_{0}\right)+n\left(t\right)\)</span> ואנחנו מעבירים אותו ב-match filter כלומר בפילטר <span class="math notranslate nohighlight">\(h\left(t\right)=s\left(-t\right)\)</span> נקבל אות:</p>
<div class="math notranslate nohighlight">
\[r_{match}\left(t\right)=E_{s}\left(\frac{R\left(t-t_{0}\right)}{E_{s}}+\zeta\left(t\right)\right)\]</div>
<p>כאשר ההספק הממוצע של הרעש הוא</p>
<div class="math notranslate nohighlight">
\[\left\langle P_{\zeta}\right\rangle =\frac{\sigma^{2}}{E_{s}}\]</div>
<p>והמקסימום של הסיגנרל שהוא לא הרעש הוא פשוט:</p>
<div class="math notranslate nohighlight">
\[\max_{t}\frac{R\left(t-t_{0}\right)}{E_{s}}=\frac{R\left(0\right)}{E_{s}}=1\]</div>
<p>זה אומר שאחרי match filter ה-SNR שלנו תלוי לינארית ב-<span class="math notranslate nohighlight">\(E_{s}\)</span> שזה נהדר! כי זה לא תלוי באמפליטודה שלנו אלא באמפליטודה בריבוע.</p>
</div></blockquote>
</section>
<section id="id3">
<h2>דוגמא - גילוי של מכ”ם<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>נניח שאתם מכם שמשדר אות פולסי <span class="math notranslate nohighlight">\(s\left(t\right)\)</span> ומחכה לתשובה. המכ”ם מעביר את האות הנקלט ב-match filter ובודק אם המקסימום עובר סף <span class="math notranslate nohighlight">\(V_{th}\)</span> כלשהו.</p>
<p>נרצה לענות על כמה שאלות:</p>
<ol class="arabic simple">
<li><p>מה הם ה-<span class="math notranslate nohighlight">\(P_{d},FAR\)</span> של המערכת</p></li>
<li><p>אם אנחנו רוצים לחסום את ה-FAR איזה SNR אנחנו יכולים להרשות לעצמנו</p></li>
</ol>
<p>נתחיל בלחשב את <span class="math notranslate nohighlight">\(P_{d},P_{FA}\)</span></p>
<p>אם נסתכל על האות אחרי דגימה נקבל (בהנחה מקלה שזמן ההגעה של ההחזר הוא אחד מזמני הדגימה):</p>
<div class="math notranslate nohighlight">
\[\begin{split}r\left[n\right]=\begin{cases}
A\cdot s\left[n-n_{0}\right]+\xi\left[n\right] &amp; \mathcal{H}_{1}\\
\xi\left[n\right] &amp; \mathcal{H}_{0}
\end{cases}\end{split}\]</div>
<p>נניח לרגע שאיך שהמכ”ם עובד זה השהוא שולח פולס ואז מקשיב (ודוגם) במשך <span class="math notranslate nohighlight">\(N\)</span> דגימות. אחרי זה הוא שולח עוד פולס כדי לחפש את המטרה הבאה. בכל מקטע כזה באורך <span class="math notranslate nohighlight">\(N\)</span> אנחנו רוצים להחליט אם מצאנו מטרה או לא.</p>
<p>על כל מקטע כזה נריץ match-filter ואז ניקח מקסימום. כלומר:</p>
<div class="math notranslate nohighlight">
\[r_{match}=\max_{0\le n\le N-1}r\left[n\right]\ast s\left[-n\right]\]</div>
<p>כדי לחפש את <span class="math notranslate nohighlight">\(P_{d},P_{FA}\)</span> נצטרך לענות על השאלה איך מתפלג המספר <span class="math notranslate nohighlight">\(r_{match}\)</span> בכל אחד מהמקרים:</p>
<div class="math notranslate nohighlight">
\[P_{d}=\intop_{r_{th}}^{\infty}\mathbb{P}\left(r_{match}|\mathcal{H}_{1}\right)dr_{match}\]</div>
<div class="math notranslate nohighlight">
\[P_{FA}=\intop_{r_{th}}^{\infty}\mathbb{P}\left(r_{match}|\mathcal{H}_{0}\right)dr_{match}\]</div>
<p>לא הכי פשוט לענות על השאלה מי הן ההתפלגויות משום שהרעש לא לבן אחרי הפילטר. אם לא היינו לוקחים max אלא מסתכלים על דגימה מסויימת היינו מקבלים ששתי ההתפלגויות הן גאוסייניות והחישובים היו קלים. די בקלות אפשר לעשות סימולציה למקרה הזה. מזמין אתכם לנסות וליצור עקומת ROC.</p>
<p>אנחנו רוצים ליצור את הפילטר האידאלי כלומר וקטור שאם אני אעשה איתו קונבולוציה אני אכפיל במלבן מושלם בתדר. המטרה שלכם היא ליצור אות סופי בגודל 100 אשר הפורייה שלו כמה שיותר קרוב למלבן בתדר. שימו לב שכאשר אתם עושים FFT לסיגנל שלכם אתם דוגמים רק 100 תדרים. אני ממליץ לרפד באפסים וככה לדגום יותר תדרים ולראות כמה הפילטר שלכם טוב.
פונקציית המטרה היא למנם את המרחק מהחלון האידאלי בנורמת L1. מומנים לבדוק בעזרת פונקציית הניקוד הבאה (אני לא מתחייב על איזה pad_length אני אשתמש אבל הוא יהיה גבוה)</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./noise"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="noise_filters.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">סינון רעש</p>
      </div>
    </a>
    <a class="right-next"
       href="../DSP/DFT_intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">מבוא ל-DFT</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">(על קצה המזלג)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#roc-curve">ROC Curve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#match-filter">גילוי אופטימלי - match filter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">דוגמא - גילוי של מכ”ם</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yoav Palti
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>